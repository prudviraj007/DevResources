<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Developer Resources</title>
  <meta name="description" content="Essential websites every programmer should bookmark." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Inter', Arial, sans-serif; background: #fafafa; color: #333; line-height: 1.6; margin: 0; }
    .container { max-width: 1200px; margin: 0 auto; padding: 20px;}
    header { text-align: center; margin-bottom: 30px;}
    h1 { font-size: 2.3rem; font-weight: 600; margin-bottom: 5px;}
    .subtitle { color: #666;}
    nav { background: #fff; padding: 13px 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,.05); margin-bottom: 25px;}
    .nav-grid { display: flex; flex-wrap: wrap; gap: 9px; justify-content: center;}
    .nav-grid a { color: #333; text-decoration: none; font-weight: 500; padding: 7px 16px; border-radius: 6px; transition: .2s; font-size: .95rem;}
    .nav-grid a.active,.nav-grid a.home-btn { background-color: #0066cc; color: #fff; font-weight: 600;}
    .nav-grid a:hover:not(.active):not(.home-btn) { background-color: #f0f0f0;}
    .back-to-top { position: fixed; bottom: 32px; right: 29px; background: #333; color: #fff; border: none; border-radius: 50%; width: 48px; height: 48px; font-size: 20px; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,.15); cursor: pointer; opacity: .65; }
    .back-to-top:hover { background: #555; }
    main { min-height: 350px;}
    .add-note-section { background: #fff; padding: 24px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,.04); text-align: center; margin-bottom: 32px;}
    .add-note-form { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 10px;}
    .add-note-form input, .add-note-form select {
      padding: 9px 12px; border: 1px solid #ddd; border-radius: 6px; font-size: .98rem; max-width: 100%;
    }
    .add-note-form input { width: 225px;}
    .add-note-form select { width: 154px;}
    .add-note-form button { padding: 9px 19px; background: #333; color: #fff; border: none; border-radius: 7px; font-size: .97rem; font-weight: 500; cursor: pointer;}
    .add-note-form button:hover { background: #555;}
    .success-message { background: #d4edda; color: #155724; padding: 9px 13px; border-radius: 6px; margin-bottom: 12px; display: none;}
    section { margin-bottom: 50px;}
    section.hidden { display: none;}
    h2 { font-size: 1.3rem; font-weight: 600; color: #222; margin-bottom: 17px; text-align: center;}
    .category-info { text-align: center; color: #999; font-size: .95rem; margin-bottom: 24px;}
    .sticky-container { display: flex; flex-wrap: wrap; gap: 13px; justify-content: center;}
    .sticky-note { background: #fffa87; width: 243px; min-height: 129px; padding: 15px; border-radius: 9px; box-shadow: 0 2px 8px rgba(0,0,0,.08); position: relative; display: flex; flex-direction: column; gap: 7px;}
    .sticky-note:hover { box-shadow: 0 4px 12px rgba(0,0,0,.16);}
    .sticky-note a { color: #222; text-decoration: none; font-weight: 600; font-size: .99rem; }
    .sticky-note a:hover { color: #0066cc; text-decoration: underline;}
    .sticky-description { color: #555; font-size: .92rem;}
    .sticky-actions { margin-top: 5px; }
    .sticky-actions button {
      background: none; border: none; cursor: pointer; color: #444; font-size: 1.1rem; padding: 2px 6px;
    }
    .sticky-actions button:hover { color: #0066cc;}
    .edit-input, .edit-select { width: 90%; margin-bottom: 5px;}
    footer { text-align: center; padding: 32px 0 10px; border-top: 1px solid #eee; color: #777; font-size: .92rem; margin-top: 40px;}
    .sr-only { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden;}
    @media (max-width: 800px){
      .sticky-note { max-width: 380px; width:98%;}
      .add-note-form input { width: 90%;}
      .sticky-container { gap:7px;}
    }
    @media (max-width: 500px) {
      nav { padding: 9px;}
      .nav-grid { flex-wrap: nowrap; overflow-x: auto;}
      .add-note-form input,.add-note-form select { max-width: 250px;}
      .container { padding: 7px;}
      .sticky-note { width: 98%;}
    }
    html { scroll-behavior: smooth;}
  </style>
</head>
<body>
<a class="sr-only" href="#main">Skip to content</a>
<div class="container">
  <header>
    <h1>Developer Resources</h1>
    <p class="subtitle">Essential websites every programmer should bookmark</p>
  </header>

  <nav aria-label="Sections">
    <div class="nav-grid" id="nav-grid">
      <a href="#home" class="home-btn" aria-current="page">Home</a>
      <a href="#prompts" data-section="prompts">AI Prompts</a>
      <a href="#help" data-section="help">Help</a>
      <a href="#news" data-section="news">News</a>
      <a href="#practice" data-section="practice">Practice</a>
      <a href="#projects" data-section="projects">Projects</a>
      <a href="#advice" data-section="advice">Advice</a>
      <a href="#style" data-section="style">Style</a>
      <a href="#tools" data-section="tools">Tools</a>
      <a href="#interviews" data-section="interviews">Interviews</a>
      <a href="#learning" data-section="learning">Learning</a>
      <a href="#ai-ml" data-section="ai-ml">AI & ML</a>
      <a href="#opensource" data-section="opensource">Open Source</a>
      <a href="#jobs" data-section="jobs">Jobs</a>
    </div>
  </nav>

  <button class="back-to-top" id="backToTop" title="Back to top" aria-label="Back to top" style="display:none;">↑</button>

  <main id="main" tabindex="-1">
    <div class="add-note-section">
      <h3>Add Your Own Resource</h3>
      <p>Add, edit or remove developer resources. It saves in your browser database.</p>
      <div class="success-message" id="success-message" role="status" aria-live="polite"></div>
      <form class="add-note-form" id="add-form">
        <input type="url" id="new-resource-url" placeholder="Enter URL (e.g., https://example.com)" required />
        <input type="text" id="new-resource-name" placeholder="Resource name" required />
        <input type="text" id="new-resource-description" placeholder="Description (optional)" />
        <select id="resource-category" required>
          <option value="">Select Category</option>
          <option value="prompts">AI Prompts</option>
          <option value="help">Help</option>
          <option value="news">Tech News</option>
          <option value="practice">Practice</option>
          <option value="projects">Projects</option>
          <option value="advice">Advice</option>
          <option value="style">Style Guides</option>
          <option value="tools">Tools</option>
          <option value="interviews">Interviews</option>
          <option value="learning">Learning</option>
          <option value="ai-ml">AI & ML</option>
          <option value="opensource">Open Source</option>
          <option value="jobs">Jobs</option>
        </select>
        <button type="submit">Add Resource</button>
      </form>
      <input type="search" id="resource-search" placeholder="🔍 Search resources..." style="margin-top:12px; width:90%; max-width:520px; padding:8px 12px; border-radius:7px; border:1px solid #dedede;">
    </div>

    <!-- Sections dynamically insert sticky-notes per category -->
    <section id="prompts"><h2>AI Prompt Libraries</h2><div class="category-info"></div><div class="sticky-container" id="prompts-container"></div></section>
    <section id="help"><h2>When You Get Stuck</h2><div class="category-info"></div><div class="sticky-container" id="help-container"></div></section>
    <section id="news"><h2>Tech News & Updates</h2><div class="category-info"></div><div class="sticky-container" id="news-container"></div></section>
    <section id="practice"><h2>Coding Practice</h2><div class="category-info"></div><div class="sticky-container" id="practice-container"></div></section>
    <section id="projects"><h2>Project Ideas</h2><div class="category-info"></div><div class="sticky-container" id="projects-container"></div></section>
    <section id="advice"><h2>General Coding Advice</h2><div class="category-info"></div><div class="sticky-container" id="advice-container"></div></section>
    <section id="style"><h2>Coding Style Guides</h2><div class="category-info"></div><div class="sticky-container" id="style-container"></div></section>
    <section id="tools"><h2>Developer Tools</h2><div class="category-info"></div><div class="sticky-container" id="tools-container"></div></section>
    <section id="interviews"><h2>Interview Preparation</h2><div class="category-info"></div><div class="sticky-container" id="interviews-container"></div></section>
    <section id="learning"><h2>Online Learning</h2><div class="category-info"></div><div class="sticky-container" id="learning-container"></div></section>
    <section id="ai-ml"><h2>AI & Machine Learning</h2><div class="category-info"></div><div class="sticky-container" id="ai-ml-container"></div></section>
    <section id="opensource"><h2>Open Source</h2><div class="category-info"></div><div class="sticky-container" id="opensource-container"></div></section>
    <section id="jobs"><h2>Jobs & Career</h2><div class="category-info"></div><div class="sticky-container" id="jobs-container"></div></section>
    <footer>
      <p>Developer Resources Collection • Built for GitHub Pages • Database powered by IndexedDB/idb</p>
    </footer>
  </main>
</div>

<!-- idb: https://github.com/jakearchibald/idb (small IndexedDB helper) -->
<script src="https://cdn.jsdelivr.net/npm/idb@7/build/umd.js"></script>
<script>
const DEFAULT_RESOURCES = {
  prompts: [
    {name:'Google AI Studio',url:'https://aistudio.google.com/app/prompts',desc:'Useful for devs/business, integrated Gemini.'},
    {name:'Hero Prompt Library',url:'https://hero.page/discover',desc:'Practical prompts for content/design.'},
    {name:'Snack Prompt',url:'https://snackprompt.com/prompts',desc:'Free/premium AI prompts.'},
    {name:'OpenAI Prompt Library',url:'https://platform.openai.com/docs/examples',desc:'Dev-focused, system prompts.'},
    {name:'Anthropic Prompt Library',url:'https://docs.anthropic.com/en/prompt-library/library',desc:'Prompts for Claude.'},
    {name:'PromptHero',url:'https://prompthero.com/',desc:'Prompts for image gen tools.'}
  ],
  help: [
    {name:'Stack Overflow',url:'https://stackoverflow.com/',desc:'Q&A for devs.'},{name:'Codementor',url:'https://www.codementor.io/',desc:'Live coding help.'}
  ],
  news: [
    {name:'Hacker News',url:'https://news.ycombinator.com/',desc:'Tech news/discussion.'},{name:'DEV Community',url:'https://dev.to/',desc:'Developer community.'}
  ],
  practice: [
    {name:'freeCodeCamp',url:'https://www.freecodecamp.org/',desc:'Free coding curriculum.'},{name:'Codecademy',url:'https://www.codecademy.com/',desc:'Interactive lessons.'}
  ],
  projects: [
    {name:'karan/Projects',url:'https://github.com/karan/Projects',desc:'Mega list of projects.'}
  ],
  advice: [
    {name:'Refactoring Guru',url:'https://refactoring.guru/',desc:'Design patterns/refactoring.'}
  ],
  style: [
    {name:'Airbnb JS Style Guide',url:'https://github.com/airbnb/javascript',desc:'JS standards.'}
  ],
  tools: [
    {name:'CodePen',url:'https://codepen.io/',desc:'Frontend editor.'},{name:'Crontab Guru',url:'https://crontab.guru/',desc:'Cron editor.'}
  ],
  interviews: [
    {name:'LeetCode',url:'https://leetcode.com/',desc:'Coding interview prep.'}
  ],
  learning: [
    {name:'Coursera',url:'https://www.coursera.org/',desc:'Courses/degrees.'}
  ],
  'ai-ml': [
    {name:'TensorFlow',url:'https://www.tensorflow.org/',desc:'ML platform.'}
  ],
  opensource: [
    {name:'GitHub',url:'https://github.com/',desc:'Dev collaboration.'}
  ],
  jobs: [
    {name:'LinkedIn Jobs',url:'https://www.linkedin.com/jobs/',desc:'Job search/networking.'}
  ]
};

// IndexedDB wrapper ("database") for resources
class ResourceDB {
  constructor() {
    this.dbPromise = idb.openDB('dev_res_db', 1, {
      upgrade(db) {
        if(!db.objectStoreNames.contains('resources'))
          db.createObjectStore('resources', {keyPath:'id',autoIncrement:true});
      }
    });
  }
  async getAll() {
    const db = await this.dbPromise;
    const arr = await db.getAll('resources');
    return arr;
  }
  async add(item) {
    const db = await this.dbPromise;
    return db.add('resources', item);
  }
  async update(id, item) {
    const db = await this.dbPromise;
    item.id = id;
    return db.put('resources', item);
  }
  async delete(id) {
    const db = await this.dbPromise;
    return db.delete('resources', id);
  }
  async clearAll() {
    const db = await this.dbPromise;
    await db.clear('resources');
  }
}

// Initial load: populate DB with defaults if empty
const db = new ResourceDB();

async function ensureDefaults() {
  const all = await db.getAll();
  if(all.length === 0) {
    let arr = [];
    Object.entries(DEFAULT_RESOURCES).forEach(([cat,list]) =>
      list.forEach(e=>arr.push({category:cat,name:e.name,url:e.url,desc:e.desc}))
    );
    for(let r of arr) await db.add(r);
  }
}

function createStickyNote(resource) {
  const div = document.createElement('div');
  div.className = 'sticky-note';
  div.innerHTML = `
  <a href="${resource.url}" target="_blank" rel="noopener noreferrer">${resource.name}</a>
  <div class="sticky-description">${resource.desc||''}</div>
  <div class="sticky-actions">
    <button title="Edit" aria-label="Edit"><span>✎</span></button>
    <button title="Delete" aria-label="Delete"><span>🗑️</span></button>
  </div>`;
  // Edit/Delete events
  const [editBtn, delBtn] = div.querySelectorAll('button');
  editBtn.onclick = () => showEditForm(div, resource);
  delBtn.onclick = async () => {
    if(confirm(`Delete "${resource.name}"?`)) {
      await db.delete(resource.id);
      showSuccessMessage(`🗑️ Resource deleted!`);
      renderResources();
    }
  };
  return div;
}

// Inline edit form
function showEditForm(div, resource) {
  div.innerHTML = `
    <input class="edit-input" type="text" value="${resource.name}" aria-label="Edit name">
    <input class="edit-input" type="url" value="${resource.url}" aria-label="Edit URL">
    <input class="edit-input" type="text" value="${resource.desc||''}" aria-label="Edit description">
    <select class="edit-select" aria-label="Edit category">
      ${Object.keys(DEFAULT_RESOURCES).map(c=>`<option value="${c}"${c==resource.category?' selected':''}>${c}</option>`).join('')}
    </select>
    <button class="edit-save">💾 Save</button>
    <button class="edit-cancel">❌ Cancel</button>
  `;
  const [name,url,desc,cat,save,cancel] = div.querySelectorAll('input,select,button');
  save.onclick = async ()=>{
    if(!name.value.trim()||!url.value.trim()||!cat.value.trim()){alert('Fill all fields.');return;}
    await db.update(resource.id,{...resource,name:name.value.trim(),url:url.value.trim(),desc:desc.value.trim(),category:cat.value});
    showSuccessMessage('✅ Resource updated!');
    renderResources();
  };
  cancel.onclick = ()=>renderResources();
}

function showSuccessMessage(msg) {
  const el = document.getElementById('success-message'); el.textContent=msg; el.style.display='block';
  setTimeout(()=>{el.style.display='none';},2500);
}

// Search/filter logic
function searchAndRenderResources(query) {
  renderResources(query);
}

// Main rendering function
async function renderResources(searchQuery=null) {
  let all = await db.getAll();
  document.querySelectorAll('.category-info').forEach(e=>e.textContent='');
  // If search, filter and bucket by category
  if(searchQuery) {
    let lc = searchQuery.toLowerCase();
    all = all.filter(r =>
      (r.name && r.name.toLowerCase().includes(lc)) ||
      (r.url && r.url.toLowerCase().includes(lc)) ||
      (r.desc && r.desc.toLowerCase().includes(lc)) ||
      (r.category && r.category.toLowerCase().includes(lc))
    );
    let buckets = {};
    all.forEach(r=>{
      if(!buckets[r.category]) buckets[r.category]=[];
      buckets[r.category].push(r);
    });
    // clear all containers
    Object.keys(DEFAULT_RESOURCES).forEach(cat=>{
      const container = document.getElementById(cat+"-container");
      if(container) container.innerHTML='';
      if(buckets[cat]){
        buckets[cat].forEach(resource=>{
          container.appendChild(createStickyNote(resource));
        });
        document.querySelector(`#${cat} .category-info`).textContent = `${buckets[cat].length} match${buckets[cat].length>1?'es':''}`;
      }
    });
    return;
  }
  // Normal: render all per category
  Object.keys(DEFAULT_RESOURCES).forEach(cat=>{
    const container = document.getElementById(cat+"-container");
    if(container) container.innerHTML='';
    let catItems = all.filter(r=>r.category===cat);
    (catItems).forEach(resource => container.appendChild(createStickyNote(resource)));
    document.querySelector(`#${cat} .category-info`).textContent = `${catItems.length} resource${catItems.length!==1?'s':''}`;
  });
}

// Add resource event
document.getElementById('add-form').onsubmit = async (e)=>{
  e.preventDefault();
  const name = document.getElementById('new-resource-name').value.trim(),
        url = document.getElementById('new-resource-url').value.trim(),
        desc = document.getElementById('new-resource-description').value.trim(),
        cat = document.getElementById('resource-category').value;
  if(!name||!url||!cat){alert('Fill in all fields.');return;}
  // Validate URL
  try{new URL(url);}catch{alert('Invalid URL.');return;}
  let all = await db.getAll();
  if(all.some(r=>r.url==url&&r.category==cat)){alert('Duplicate in category.');return;}
  await db.add({name,url,desc,category:cat});
  showSuccessMessage('✅ Resource added!');
  document.getElementById('add-form').reset();
  renderResources();
};

// Search field event
document.getElementById('resource-search').addEventListener('input',e=>{
  searchAndRenderResources(e.target.value);
});

// Navigation/routing logic
function setActiveNav(hash) {
  document.querySelectorAll('.nav-grid a').forEach(a=>a.classList.remove('active'));
  const t = Array.from(document.querySelectorAll('.nav-grid a')).find(a=>a.getAttribute('href')===hash);
  if(t){t.classList.add('active');}
  else document.querySelector('.home-btn').classList.add('active');
}
function showAllSections() {
  document.querySelectorAll('section').forEach(s=>s.classList.remove('hidden'));
  setActiveNav('#home');
  scrollToTop();
}
function filterSection(sectionId) {
  document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'));
  const sel = document.getElementById(sectionId); if(sel)sel.classList.remove('hidden');
  setActiveNav(`#${sectionId}`);
  scrollToTop();
}
function scrollToTop() { window.scrollTo({top:0,behavior:'smooth'});}
document.getElementById('backToTop').onclick=scrollToTop;

// Show back-to-top if scrolling
window.addEventListener('scroll',()=> {
  const btn = document.getElementById('backToTop');
  btn.style.display = (window.scrollY>250)?'block':'none';
});

// Hashchange router
function handleHashRoute(){
  const hash = window.location.hash||'#home';
  if(hash==='#home'||hash==='#'||hash===''){showAllSections();}
  else{const id=hash.replace('#','');
    if(document.getElementById(id)){filterSection(id);}
    else showAllSections();
  }
  // Focus main for accessibility
  document.getElementById('main')?.focus();
}
document.getElementById('nav-grid').addEventListener('click',e=>{
  const link = e.target.closest('a');
  if(!link)return;
  if(link.classList.contains('home-btn')){e.preventDefault();history.pushState({},'', '#home');showAllSections();}
  else if(link.dataset.section){e.preventDefault();history.pushState({},'',`#${link.dataset.section}`);filterSection(link.dataset.section);}
});
window.addEventListener('DOMContentLoaded',async ()=>{
  await ensureDefaults();
  renderResources();
  handleHashRoute();
});
window.addEventListener('hashchange',handleHashRoute);

</script>
</body>
</html>
